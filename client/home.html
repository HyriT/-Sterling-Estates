<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MC Real Estate</title>
  <link href="style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
<script src="https://cdn.socket.io/4.5.1/socket.io.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="script.js"></script>
<style>
/* Simple styling for the results grid and cards */
.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 20px;
  margin-top: 40px;
}

.listing-card {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  overflow: hidden;
  transition: transform 0.25s;
}

.listing-card:hover {
  transform: translateY(-6px);
}

.listing-card img {
  width: 100%;
  height: 180px;
  object-fit: cover;
}
.listing-card h3 {
  margin: 16px;
  font-size: 1.2rem;
  color: #16404D;
}

.listing-card p {
  margin: 0 16px 16px;
  color: #444;
}
.stats {
  display: flex;
  justify-content: space-around;
  padding: 50px 20px;
  background-color: #f8f9fa;
}

.stat-box {
  text-align: center;
}

.stat-box h3 {
  font-size: 2.5rem;
  color: #007BFF;
}
@keyframes slideFadeIn {
  0% {
    opacity: 0;
    transform: translateY(40px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.hero-content form {
  opacity: 0;
  animation: slideFadeIn 1s ease-out forwards;
  animation-delay: 0.8s;
}


</style>
</head>
<body>
  <!-- Header Section -->
  <header id="main-header">
      <div style="font-family: 'Poppins', sans-serif; font-weight: 700; font-size: 2rem; color: #ffffff;">
  <span style="color: #d4af37;">MC</span> Real Estate
</div>
   <nav>
  <ul>
    <li><a href="home.html">Home</a></li>
    <li><a href="team.html">Agent</a></li>
    
    <li class="protected-link"><a href="listing.html">Properties</a></li>
    <li class="protected-link"><a href="blog.html">Blog</a></li>
    <li class="protected-link"><a href="contact.html">Contact Us</a></li>

    <li class="nav-btn"><a href="login.html">Log In</a></li>

    <li id="profile-menu" class="profile hidden">
      <div class="avatar" onclick="toggleDropdown()">ðŸ‘¤</div>
      <ul class="dropdown hidden" id="dropdown-menu">
        <li><a href="profile.html">My Profile</a></li>
        <li><a href="#" onclick="logout()">Logout</a></li>
      </ul>
    </li>
  </ul>
</nav>

  </header>

  <!-- Hero Section -->
  <section class="hero" id="hero-section">
    <div class="hero-content">
      <h2>Find Your <span>Dream Home</span> Today</h2>
      <p>Book a free appraisal with our expert team!</p>
      <form id="appraisal-form">
        <input type="email" placeholder="Email Address" required />
<input type="tel" name="mobile" placeholder="Mobile Number" required />
          <button type="submit">Get Free Appraisal</button>
      </form>
    </div>
  </section>

  <!-- Featured Properties -->
  <section class="featured-properties">
    <h2>Featured Properties</h2>
    <div class="property-slider">
      <div class="property-card">
        <img src="https://media.inmobalia.com/imgV1/B98Le8~d7M9k3DegigWkzHXQlgzMFGqGJJp6ZRUcpX033lqadFBp2i4GGW4X2J1jIJ9Pwc6GsJX5cPSaC8Y5L~JfyHdu4Kip1k1BUXOH79lk7UcgFRZZpz08Gq0XYvIoCuFBwkVo2_1gNz0CTjMM~nwMCacKVSnxFqgAjshcyFNEvo8Fm3zMfXm8a2BuiMGTw81AkKEafL2ZAp0y1lW5B5RxQ6FNnWTdiWrtyg0F1cO~VDzRzkR1CTxT34_zjr6lGTeh170IIeV0PT~AiMWNy2EmULLO7ynh6qSTGVgY9TMnOMGTZlUA1MdNmkChpsEtmA--.jpg" alt="Modern Villa" />
        <h3>Modern Villa</h3>
        <p>$500,000 Â· 4 Beds Â· 3 Baths</p>
      </div>
      <div class="property-card">
        <img src="https://sumesshmenonassociates.com/wp-content/uploads/2022/11/luxury-apartments-banner-new.webp" alt="Luxury Apartment" />
        <h3>Luxury Apartment</h3>
        <p>$320,000 Â· 2 Beds Â· 2 Baths</p>
      </div>
      <div class="property-card">
        <img src="https://i.ytimg.com/vi/nOWuGCGtz9Q/maxresdefault.jpg" alt="Cozy Cottage" />
        <h3>Cozy Cottage</h3>
        <p>$250,000 Â· 3 Beds Â· 2 Baths</p>
      </div>
       <div class="property-card">
        <img src="https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iuz.11VRRK8c/v0/-1x-1.webp" alt="Cozy Cottage" />
        <h3>Penthouse</h3>
        <p>$250,000 Â· 3 Beds Â· 2 Baths</p>
      </div>
       <div class="property-card">
        <img src="https://admin.albanianpost.com/wp-content/uploads/2021/06/Duplex-house-for-sale-in-Woodside-Park-01.jpg" alt="Cozy Cottage" />
        <h3>Duplex</h3>
        <p>$250,000 Â· 3 Beds Â· 2 Baths</p>
      </div>
    </div>
  </section>

 <!-- Search Section -->
<section class="search-section">
  <h2>Search Properties</h2>
  <form id="search-form">
    <input type="text" name="location" placeholder="Location" />
    <select name="type">
      <option value="all">Property Type</option>
      <option value="sale">Sale</option>
      <option value="rent">Rent</option>
    </select>
    <input type="number" name="minPrice" placeholder="Min Price" />
    <input type="number" name="maxPrice" placeholder="Max Price" />
    <button type="submit">Search</button>
  </form>
</section>

<div id="results" class="results-grid"></div>


 <!-- Stats Section -->
<section class="stats">
  <div class="stat-box">
    <h3 data-target="250">0</h3>
    <p>Properties Listed</p>
  </div>
  <div class="stat-box">
    <h3 data-target="150">0</h3>
    <p>Happy Clients</p>
  </div>
  <div class="stat-box">
    <h3 data-target="15">0</h3>
    <p>Years Experience</p>
  </div>
</section>


  <!-- Testimonials -->
  <section class="testimonials">
    <h2 style="color: #d4af37;">What Our Clients Say</h2>
    <div class="testimonial">
      <p>"MC Real Estate made buying our first home a breeze!"</p>
      <h4 style="color: #d4af37;">â€“ Sarah T.</h4>
    </div>
    <div class="testimonial">
      <p>"Professional, reliable, and highly recommended!"</p>
      <h4 style="color: #d4af37;">â€“ James K.</h4>
    </div>
  </section>

  <!-- Newsletter -->
  <section class="newsletter">
    <h2>Subscribe to Our Newsletter</h2>
    <form id="newsletter-form">
      <input type="email" placeholder="Enter your email" required />
      <button type="submit">Subscribe</button>
    </form>
  </section>
<!-- Footer Section -->
<footer>
  <div class="footer-content">
    
    <!-- Brand Info -->
    <div class="footer-section">
      <h3>MC Real Estate</h3>
      <p>Your trusted partner in finding the perfect property. We combine local knowledge with digital tools to help you make the right move.</p>
    </div>

    <!-- Quick Links -->
    <div class="footer-section">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="home.html">Home</a></li>
        <li><a href="aboutUs.html">About Us</a></li>
        <li><a href="listing.html">Properties</a></li>
        <li><a href="contact.html">Contact Us</a></li>
      </ul>
    </div>

    <!-- Contact Info -->
    <div class="footer-section">
      <h3>Contact Us</h3>
      <p>Email: info@mcrealestate.com</p>
      <p>Phone: (123) 456-7890</p>
      <p>Address: 123 Real Estate Ave, Dream City</p>
    </div>

    <!-- Social Media -->
    <div class="footer-section">
      <h3>Follow Us</h3>
      <ul style="display: flex; gap: 15px; padding: 0; list-style: none;">
        <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
        <li><a href="#"><i class="fab fa-instagram"></i></a></li>
        <li><a href="#"><i class="fab fa-twitter"></i></a></li>
        <li><a href="#"><i class="fab fa-linkedin-in"></i></a></li>
      </ul>
    </div>
    
  </div>

  <div class="footer-bottom">
    <p>&copy; 2025 MC Real Estate. All Rights Reserved.</p>
  </div>
</footer>



  <script>
    // Dropdown 
    function toggleDropdown() {
      const dropdown = document.getElementById('dropdown-menu');
      dropdown.classList.toggle('hidden');
    }
   async function logout() {
  try {
    const res = await fetch("http://localhost:3000/api/auth/signout", {
      method: "POST",
      credentials: "include", 
    });

    if (res.ok) {
      localStorage.removeItem("user");

      window.location.href = "auth.html";
    } else {
      alert("Something went wrong during logout.");
    }
  } catch (err) {
    console.error("Logout error:", err);
    alert("Logout failed!");
  }
}
    // Optional
    window.addEventListener('click', function(e){
      const dropdown = document.getElementById('dropdown-menu');
      const avatar = document.querySelector('.avatar');
      if (!avatar.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.classList.add('hidden');
      }
    });

    function createListingCard(listing) {
  const card = document.createElement('div');
  card.className = 'listing-card';
  card.innerHTML = `
    <img src="${listing.imageUrls?.[0] || 'https://via.placeholder.com/300'}" alt="${listing.name}">
    <h3>${listing.name}</h3>
    <p>${listing.bedrooms} Beds Â· ${listing.bathrooms} Baths</p>
    <p><strong>$${listing.regularPrice.toLocaleString()}</strong></p>
  `;
  return card;
}

document.addEventListener('DOMContentLoaded', () => {
  const form = document.getElementById('search-form');
  const resultsDiv = document.getElementById('results');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const location = form.elements['location'].value.trim();
    const type = form.elements['type'].value;
    const minPrice = form.elements['minPrice'].value;
    const maxPrice = form.elements['maxPrice'].value;

    const params = new URLSearchParams();
    if (location) params.append('location', location);
    if (type && type !== 'all') params.append('type', type);
    if (minPrice) params.append('minPrice', minPrice);
    if (maxPrice) params.append('maxPrice', maxPrice);

    const url = `http://localhost:3000/api/listing/filtered?${params.toString()}`;

    try {
      const res = await fetch(url);
      if (!res.ok) throw new Error('Network response was not ok');

      const listings = await res.json();

      resultsDiv.innerHTML = '';

      if (listings.length === 0) {
        resultsDiv.textContent = 'No properties match your search.';
        return;
      }

      listings.forEach(listing => {
        resultsDiv.appendChild(createListingCard(listing));
      });
    } catch (err) {
      console.error('Search failed:', err);
      resultsDiv.textContent = 'Something went wrong. Please try again.';
    }
  });

  function createListingCard(listing) {
    const card = document.createElement('div');
    card.className = 'result=card';
    card.style.border = '1px solid #ccc';
    card.style.padding = '10px';
    card.style.marginBottom = '10px';
    card.style.borderRadius = '5px';

    card.innerHTML = `
      <h3>${listing.name}</h3>
      <p><strong>Type:</strong> ${listing.type}</p>
      <p><strong>Price:</strong> â‚¬${listing.regularPrice}</p>
      <p><strong>Location:</strong> ${listing.address}</p>
      <p>${listing.description}</p>
      ${listing.imageUrls && listing.imageUrls.length > 0 
        ? `<img src="${listing.imageUrls[0]}" alt="Image" style="max-width:100%; height:auto; margin-top:10px;">` 
        : ''}
    `;
    return card;
  }
});
document.addEventListener("DOMContentLoaded", () => {
  const searchForm = document.getElementById("search-form");

  searchForm.addEventListener("submit", function(e) {
    e.preventDefault();

    const user = JSON.parse(localStorage.getItem("user"));

    if (!user || !user.email) {
      window.location.href = "auth.html";
    } else {
     
      this.submit(); 
    }
  });
});
const counters = document.querySelectorAll('.stat-box h3');
let started = false;

function startCounting() {
  counters.forEach(counter => {
    const target = +counter.getAttribute('data-target');
    let count = 0;

    const update = () => {
      const increment = target / 100;

      if (count < target) {
        count += increment;
        counter.innerText = Math.ceil(count);
        requestAnimationFrame(update);
      } else {
        counter.innerText = target + "+";
      }
    };

    update();
  });
}

const observer = new IntersectionObserver(entries => {
  if (entries[0].isIntersecting && !started) {
    started = true;
    startCounting();
  }
}, {
  threshold: 0.5
});

observer.observe(document.querySelector('.stats'));


  </script>
</body>
</html>
