<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sterling Estates</title>
  <link href="style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
<script src="https://cdn.socket.io/4.5.1/socket.io.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">


<script src="script.js"></script>
<style>
/* Simple styling for the results grid and cards */
.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 20px;
  margin-top: 40px;
}

.listing-card {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.08);
  overflow: hidden;
  transition: transform 0.25s;
}

.listing-card:hover {
  transform: translateY(-6px);
}

.listing-card img {
  width: 100%;
  height: 180px;
  object-fit: cover;
}
.listing-card h3 {
  margin: 16px;
  font-size: 1.2rem;
  color: #16404D;
}

.listing-card p {
  margin: 0 16px 16px;
  color: #444;
}

@keyframes slideFadeIn {
  0% {
    opacity: 0;
    transform: translateY(40px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.hero-content form {
  opacity: 0;
  animation: slideFadeIn 1s ease-out forwards;
  animation-delay: 0.8s;
}
.search-section h2 {
  font-family: 'Baskerville', serif;
  font-size: 2.5rem;
  font-weight: 700;
  color: #333;
  text-align: center;
  margin: 40px 0;
  letter-spacing: 1px;
}

.search-section h2 span {
  color: rgb(7, 131, 126);
  font-style: italic;
  display: inline-block;
  position: relative;
  animation: bounce 1.5s infinite;
}

@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}


</style>
</head>
<body>
  <!-- Header Section -->
  <header id="main-header">
      <div style="font-family: 'Poppins', sans-serif; font-weight: 700; font-size: 2rem; color: #ffffff;">
  <span style="color: #f1f1f1;"><i class="fas fa-home"></i> </i> Sterling Estates</span>
</div>
   <nav>
  <ul>
    <li><a href="home.html">Home</a></li>
    <li><a href="team.html">Agent</a></li>
    
    <li class="protected-link"><a href="listing.html">Properties</a></li>
    <li class="protected-link"><a href="blog.html">Blog</a></li>
    <li class="protected-link"><a href="contact.html">Contact Us</a></li>


     <li ><a href="auth.html"> Sign in</a></li>
    <li class="nav-btn"><a href="auth.html">Sign up</a></li>

    <li id="profile-menu" class="profile hidden">
      <div class="avatar" onclick="toggleDropdown()">👤</div>
      <ul class="dropdown hidden" id="dropdown-menu">
        <li><a href="profile.html">My Profile</a></li>
        <li><a href="#" onclick="logout()">Logout</a></li>
      </ul>
    </li>
  </ul>
</nav>

  </header>

  <!-- Hero Section -->
  <section class="hero" id="hero-section">
    <div class="hero-content">
    <h2>Discover Your <span>Home's</span> True Value</h2>
      <p>"Book a free appraisal with our trusted experts"</p>
      <form id="appraisal-form">
        <input type="email" placeholder="Email Address" required />
<input type="tel" name="mobile" placeholder="Mobile Number" required />
          <button type="submit">Get Free Appraisal</button>
      </form>
    </div>
  </section>

<section class="properties-section">
  <h2>Featured Properties</h2>

  <!-- Property 1 -->
  <div class="property-row">
    <div class="property-image">
      <img src="/client/images/esref-yasa-549nOjXh1E4-unsplash.jpg" alt="Property 1">
    </div>
    <div class="property-description">
      <h3>Luxury Villa in the Hills</h3>
      <p>This beautiful villa offers stunning views, modern amenities, and a spacious garden perfect for relaxation.</p>
      <ul class="property-info">
        <li>💤 Bedrooms: 4</li>
        <li>🛁 Bathrooms: 3</li>
        <li>📐 Area: 3500 sq ft</li>
        <li>💰 Price: $1,200,000</li>
      </ul>
      <button class="view-property-btn">View Property</button>
        <div class="property-reviews">
    <span class="stars">⭐⭐⭐⭐☆</span>
    <span class="review-count">(24 reviews)</span>
  </div>
</div>
    </div>
  </div>

  <!-- Property 2 -->
  <div class="property-row reverse">
    <div class="property-image">
      <img src="/client/images/connie-garrad-VGtMvqHDpFw-unsplash.jpg" alt="Property 2">
    </div>
    <div class="property-description">
      <h3>Modern Apartment Downtown</h3>
      <p>Located in the heart of the city, this apartment combines comfort with convenience for an urban lifestyle.</p>
      <ul class="property-info">
        <li>💤 Bedrooms: 2</li>
        <li>🛁 Bathrooms: 2</li>
        <li>📐 Area: 1200 sq ft</li>
        <li>💰 Price: $750,000</li>
      </ul>
      <button class="view-property-btn">View Property</button>
       <div class="property-reviews">
    <span class="stars">⭐⭐⭐☆☆</span>
    <span class="review-count">(20 reviews)</span>
  </div>
    </div>
  </div>

  <!-- Property 3 -->
  <div class="property-row">
    <div class="property-image">
      <img src="/client/images/durian-bullet-JCMQo028t3Q-unsplash.jpg" alt="Property 3">
    </div>
    <div class="property-description">
      <h3>Cozy Suburban Home</h3>
      <p>Perfect for families, this home features a large backyard, modern kitchen, and close proximity to schools.</p>
      <ul class="property-info">
        <li>💤 Bedrooms: 3</li>
        <li>🛁 Bathrooms: 2</li>
        <li>📐 Area: 1800 sq ft</li>
        <li>💰 Price: $500,000</li>
      </ul>
      <button class="view-property-btn">View Property</button>
         <div class="property-reviews">
    <span class="stars">⭐⭐⭐⭐☆</span>
    <span class="review-count">(27 reviews)</span>
  </div>
    </div>
  </div>

  <!-- Property 4 -->
  <div class="property-row reverse">
    <div class="property-image">
      <img src="/client/images/timo-wielink-fUazXkugSAM-unsplash.jpg" alt="Property 4">
    </div>
    <div class="property-description">
      <h3>Seaside Cottage</h3>
      <p>Enjoy serene ocean views from this charming cottage with cozy interiors and outdoor deck space.</p>
      <ul class="property-info">
        <li>💤 Bedrooms: 2</li>
        <li>🛁 Bathrooms: 1</li>
        <li>📐 Area: 900 sq ft</li>
        <li>💰 Price: $350,000</li>
      </ul>
      <button class="view-property-btn">View Property</button>
         <div class="property-reviews">
    <span class="stars">⭐⭐⭐⭐</span>
    <span class="review-count">(30 reviews)</span>
  </div>
    </div>
  </div>

</section>

 
<!-- Search Section -->
<section class="search-section">
  <h2>Find Your <span>Dream Home</span>Today</h2>
  <form id="search-form">
    <div class="input-group">
      <i class="fa-solid fa-location-dot"></i>
      <input type="text" name="location" placeholder="Location" />
    </div>
    <div class="input-group">
      <i class="fa-solid fa-building"></i>
      <select name="type">
        <option value="all">Property Type</option>
        <option value="sale">Sale</option>
        <option value="rent">Rent</option>
      </select>
    </div>
    <div class="input-group">
      <i class="fa-solid fa-dollar-sign"></i>
      <input type="number" name="maxPrice" placeholder="Price Range" />
    </div>
    <button type="submit"><i class="fa-solid fa-magnifying-glass"></i> Search</button>
  </form>
</section>

<div id="results" class="results-grid"></div>


 <!-- Stats Section -->
<section class="stats">
  <div class="stat-box">
    <h3 data-target="250">0</h3>
    <p>Properties Listed</p>
  </div>
  <div class="stat-box">
    <h3 data-target="150">0</h3>
    <p>Happy Clients</p>
  </div>
  <div class="stat-box">
    <h3 data-target="15">0</h3>
    <p>Years Experience</p>
  </div>
</section>


  <section class="why-choose-us">
    <div class="container">
      <h2>Why Choose Us</h2>
      <p class="subtitle">
        Elevating Your Home Buying Experience with <span>Expertise</span>, <span>Integrity</span>,<br>
        and Unmatched Personalized Service
      </p>
      
      <div class="cards">
        <div class="card">
          <div class="icon"><i class="fa-solid fa-location-dot"></i></div>
          <h3>Expert Guidance</h3>
          <p>Benefit from our team’s seasoned expertise for a smooth buying experience</p>
        </div>
        <div class="card">
          <div class="icon"><i class="fa-solid fa-user"></i></div>
          <h3>Personalized Service</h3>
          <p>Our services adapt to your unique needs, making your journey stress-free</p>
        </div>
        <div class="card">
          <div class="icon"><i class="fa-solid fa-clipboard-list"></i></div>
          <h3>Transparent Process</h3>
          <p>Stay informed with our clear and honest approach to buying your home</p>
        </div>
        <div class="card">
          <div class="icon"><i class="fa-solid fa-hands-helping"></i></div>
          <h3>Exceptional Support</h3>
          <p>Providing peace of mind with our responsive and attentive customer service</p>
        </div>
      </div>
    </div>
  </section>
<!-- Footer Section -->
<footer>

  <div class="footer-content">
    
    <!-- Brand Info -->
    <div class="footer-section">
      <h3>Sterling Estates</h3>
      <p>Your trusted partner in finding the perfect property. We combine local knowledge with digital tools to help you make the right move.</p>
    </div>

    <!-- Quick Links -->
    <div class="footer-section">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="home.html">Home</a></li>
        <li><a href="aboutUs.html">About Us</a></li>
        <li><a href="listing.html">Properties</a></li>
        <li><a href="contact.html">Contact Us</a></li>
      </ul>
    </div>

    <!-- Contact Info -->
    <div class="footer-section">
      <h3>Contact Us</h3>
      <p>Email: info@mcrealestate.com</p>
      <p>Phone: (123) 456-7890</p>
      <p>Address: 123 Real Estate Ave, Dream City</p>
    </div>

    <!-- Social Media -->
    <div class="footer-section">
      <h3>Follow Us</h3>
      <ul style="display: flex; gap: 15px; padding: 0; list-style: none;">
        <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
        <li><a href="#"><i class="fab fa-instagram"></i></a></li>
        <li><a href="#"><i class="fab fa-twitter"></i></a></li>
        <li><a href="#"><i class="fab fa-linkedin-in"></i></a></li>
      </ul>
    </div>
    
  </div>

  <div class="footer-bottom">
    <p>&copy; 2025 Sterling Estates. All Rights Reserved.</p>
  </div>
</footer>



 <script>
  // Dropdown 
  function toggleDropdown() {
    const dropdown = document.getElementById('dropdown-menu');
    dropdown.classList.toggle('hidden');
  }

  async function logout() {
    try {
      const res = await fetch("http://localhost:5000/api/auth/signout", {
        method: "POST",
        credentials: "include", 
      });

      if (res.ok) {
        localStorage.removeItem("user");
        window.location.href = "auth.html";
      } else {
        alert("Something went wrong during logout.");
      }
    } catch (err) {
      console.error("Logout error:", err);
      alert("Logout failed!");
    }
  }

  window.addEventListener('click', function(e){
    const dropdown = document.getElementById('dropdown-menu');
    const avatar = document.querySelector('.avatar');
    if (avatar && !avatar.contains(e.target) && !dropdown.contains(e.target)) {
      dropdown.classList.add('hidden');
    }
  });

  function createListingCard(listing) {
    const card = document.createElement('div');
    card.className = 'listing-card';

    card.innerHTML = `
      <img src="${listing.imageUrls?.[0] || 'https://via.placeholder.com/300'}" alt="${listing.name}">
      <h3>${listing.name}</h3>
      <p><strong>Type:</strong> ${listing.type}</p>
      <p><strong>Price:</strong> €${listing.regularPrice.toLocaleString()}</p>
      <p><strong>Location:</strong> ${listing.address}</p>
      <p>${listing.description || ''}</p>
    `;
    return card;
  }

  // Search form
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('search-form');
    const resultsDiv = document.getElementById('results');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const user = JSON.parse(localStorage.getItem("user"));
      if (!user || !user.email) {
        window.location.href = "auth.html";
        return;
      }

      const location = form.elements['location'].value.trim();
      const type = form.elements['type'].value;
      const maxPrice = form.elements['maxPrice'].value;

      const params = new URLSearchParams();
      if (location) params.append('location', location);
      if (type && type !== 'all') params.append('type', type);
      if (maxPrice) params.append('maxPrice', maxPrice);

      const url = `http://localhost:5000/api/listing/filtered?${params.toString()}`;

      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error('Network response was not ok');

        const listings = await res.json();
        resultsDiv.innerHTML = '';

        if (listings.length === 0) {
          resultsDiv.textContent = 'No properties match your search.';
          return;
        }

        listings.forEach(listing => {
          resultsDiv.appendChild(createListingCard(listing));
        });

        
        resultsDiv.scrollIntoView({ behavior: "smooth" });
      } catch (err) {
        console.error('Search failed:', err);
        resultsDiv.textContent = 'Something went wrong. Please try again.';
      }
    });
  });

  // Stats counting
  const counters = document.querySelectorAll('.stat-box h3');
  let started = false;

  function startCounting() {
    counters.forEach(counter => {
      const target = +counter.getAttribute('data-target');
      let count = 0;

      const update = () => {
        const increment = target / 100;

        if (count < target) {
          count += increment;
          counter.innerText = Math.ceil(count);
          requestAnimationFrame(update);
        } else {
          counter.innerText = target + "+";
        }
      };

      update();
    });
  }

  const observer = new IntersectionObserver(entries => {
    if (entries[0].isIntersecting && !started) {
      started = true;
      startCounting();
    }
  }, { threshold: 0.5 });

  observer.observe(document.querySelector('.stats'));
</script>

</body>
</html>
